receivers:
  awscloudwatch:
    region: ${env:AWS_REGION}
    profile: ${env:AWS_PROFILE}
    logs:
      poll_interval: 10s
    storage: file_storage

processors:
  resource/axoflow:
    attributes:
      - key: "com.axoflow.product"
        action: insert
        value: "aws-cloudwatch"

exporters:
  otlp/axorouter:
    endpoint: ${env:AXOROUTER_ENDPOINT}
    tls:
      insecure: true

extensions:
  health_check:
    endpoint: ${env:POD_IP}:13133
  file_storage:
    directory: ${env:STORAGE_DIRECTORY}
    create_directory: true

service:
  extensions: [health_check, file_storage]
  pipelines:
    logs:
      receivers: [awscloudwatch]
      processors: [resource/axoflow]
      exporters: [otlp/axorouter]
